"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawBubble=void 0;var config_1=require("./config"),conversions_1=require("./conversions"),drawBubble=function(n,e,a,t,r){function i(e,t){var r=a(e),i=a(t),e=a(o),t=a(b);n.strokeStyle=config_1.config.bubbleStrokeStyle,n.lineWidth=t,n.beginPath(),n.arc(r,i,e,0,2*Math.PI),n.closePath(),n.stroke()}var s=t.exitPosition,o=t.radius,u=t.stepRatio,b=t.thickness,l=t.burstAngles,c=r.burst,x=r.height,f=r.burstPhaseProportion,y=r.wave,h=y.frequency,g=y.amplitude,r=(t={exit:s.y,rise:x-s.y,burst:x/(1-f)*f},{exit:(r=t.exit)/(t=(y=t.burst)+r+(f=t.rise)),rise:f/t,burst:y/t,beforeBurst:(r+f)/t}),f=x-s.y,t=e.x+s.x,x=e.y-s.y;if(u<=r.exit){var v=u/r.exit,P={x:e.x,y:e.y+o+b},s=P.x,e=P.y,P={x:t-s,y:x-e};i(s+v*P.x,e+v*P.y)}else if(u<=r.beforeBurst){v=(u-r.exit)/r.rise;i(t+Math.sin(v*h%1*Math.PI*2)*g,x-v*f)}else for(var P=(0,conversions_1.hexColorToRgb)(config_1.config.bubbleStrokeStyle),d=P.r,p=P.g,M=P.b,v=(u-r.beforeBurst)/r.burst,B=o+b,_=B+c.radius-B,S=.9*b,k=.67*S,w=t+Math.sin(h%1*Math.PI*2)*g,I=x-f,q=function(e){function t(e){return{x:w+Math.cos(r)*e,y:I+Math.sin(r)*e}}var r=l[e],i=B+_*v,s=i+S,o=t(i),e=(o.x,o.y,t(s)),o=(e.x,e.y,t((i+s)/2)),e=o.x,i=o.y,s=1-v;n.fillStyle="rgba("+d+","+p+","+M+","+(s=s<1e-5?0:s)+")";o=a(e),s=a(i),e=a(S/2),i=a(k/2);n.beginPath(),n.ellipse(o,s,e,i,r,0,2*Math.PI),n.closePath(),n.fill()},C=0;C<c.particleCount;C++)q(C)};exports.drawBubble=drawBubble;